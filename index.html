<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="google-adsense-account" content="ca-pub-7487029408349375">
  <title>Cube Shooter</title>
  <link rel="stylesheet" href="src/styles/index.css">
  <link rel="icon" href="src/assets/image/menuScreen.png" type="image/x-icon">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
</head>
<body>
  <canvas id="gameCanvas"></canvas>
  <div id="score">Score: 0</div>
  <div id="healthBarContainer">
    <div id="healthBar"></div>
  </div>
  <div id="waveDisplay">Wave: 1</div>

  <div id="menu">
    <h1>Cube Shooter</h1>
    <button onclick="startGame()">Start</button>
    <button onclick="openSettings()">Settings</button>
    <button onclick="quitGame()">Quit</button>
    <div id="versionLabel">v1.0.2</div>
  </div>  

  <div class="header finisher-header" style="width: 100%; height: 300px;"></div>

  <div id="settings" style="display:none;">
    <h2>Settings</h2>

    <!-- AUDIO -->
    <button onclick="openAudio()" id="audioSetting">Audio</button>
    <div id="audioSection" style="display:none;">
      <h3>Audio</h3>
      <div id="audioToggles">
        <label>
          <input type="checkbox" id="musicToggle" checked> Music
        </label>
        <label>
          <input type="checkbox" id="sfxToggle" checked> SFX
        </label>
      </div>
      <button onclick="backAudio()" class="backBtn">Back</button>
    </div>

    <!-- CONTROLS -->
    <button onclick="openControl()" id="controlSetting">Controls</button>
    <div id="controlSection" style="display:none; flex-direction:column; align-items:center;">
      <h3>Controls</h3>

      <!-- Grid of 4 main buttons -->
      <div class="controlGrid">
        <button onclick="openControlType()" id="controlTypeBtn">Control Type</button>
        <button onclick="openKeybind()" id="keybindBtn">Keybinds</button>
        <button onclick="toggleFullscreen()" id="fullscreenBtn">Toggle Fullscreen</button>
        <button onclick="openHelp()" id="helpBtn">Help</button>
      </div>

      <!-- Back button -->
      <button onclick="backControl()" class="backBtn" style="margin-top:18px;">Back</button>
    </div>

    <!-- CONTROL TYPE MENU -->
    <div id="controlTypeSection" class="menuPanel">
      <h3>Control Type</h3>
      <button onclick="setControl('buttons')" id="buttonModeBtn">Buttons</button>
      <button onclick="setControl('joystick')" id="joystickModeBtn">Joystick</button>
      <p style="color:#aaa; margin-top:12px;">Choose your preferred input method.</p>
      <button onclick="backControlType()" class="backBtn">Back</button>
    </div>

    <!-- KEYBIND MENU -->
    <div id="keybindSection" class="menuPanel">
      <h3>Keybinds</h3>
      <div style="margin: 12px 0; text-align:left;">
        <label>Left: <input type="text" id="leftKeyInput"></label><br>
        <label>Right: <input type="text" id="rightKeyInput"></label><br>
        <label>Up: <input type="text" id="upKeyInput"></label><br>
        <label>Down: <input type="text" id="downKeyInput"></label><br>
      </div>
      <button id="resetKeysBtn">Reset Keys</button>
      <button onclick="backKeybind()" class="backBtn">Back</button>
    </div>

    <!-- HELP MENU -->
    <div id="helpSection" class="menuPanel">
      <h3>Help</h3>
      <p style="max-width:600px; line-height:1.5;">
        Use <b>WASD / Arrow Keys</b> to move.<br>
        Use your mouse to aim and shoot.<br>
        Use <b>R</b> to reload.<br>
        Use <b>Shift</b> to sprint.<br>
        Use <b>Esc</b> to pause/resume.<br><br>
        Survive waves of enemies and collect powerups!
      </p>
      <button onclick="backHelp()" class="backBtn">Back</button>
    </div>

    <!-- CREDITS -->
    <button onclick="openCredit()" id="creditSetting">Credits</button>
    <div id="creditSection" style="display:none;">
      <h3>Credits</h3>
      <p>Game by: Piemann</p>
      <p>Music: Apocalypse - SYBS</p>
      <p>Assets by: Piemann</p>
      <button onclick="backCredit()" class="backBtn">Back</button>
    </div>

    <!-- BACK -->
    <button onclick="closeSettings()" id="close-setting">Back</button>
  </div>


  <div id="gameOver">
    <h2>Game Over</h2>
    <p id="finalScore"></p>
    <button onclick="restartGame()">Restart</button>
    <button onclick="backToMenu()">Main Menu</button>
  </div>

  <button id="pauseBtn" style="position:absolute;top:18px;right:32px;font-size:22px;padding:10px 26px;">Pause</button>

  <audio id="backgroundMusic" loop>
    <source src="src/assets/music/Apocalypse - SYBS.mp3" type="audio/mpeg">

  <!-- Use type="module" for ES module support -->
  <script type="module" src="src/scripts/index.js"></script>
  <script src="src/scripts/animated-background.js" type="text/javascript"></script>
  <script type="text/javascript">
    new FinisherHeader({
      "count": 100,
      "size": {
        "min": 2,
        "max": 8,
        "pulse": 0.1
      },
      "speed": {
        "x": {
          "min": 0,
          "max": 0.4
        },
        "y": {
          "min": 0,
          "max": 0.6
        }
      },
      "colors": {
        "background": "transparent",
        "particles": [
          "#fbfcca",
          "#d7f3fe",
          "#ffd0a7",
          "#fcd0fc",
          "#00ffef",
          "#edffde"
        ]
      },
      "blending": "overlay",
      "opacity": {
        "center": 1,
        "edge": 0.05
      },
      "skew": 0,
      "shapes": [
        "c"
      ]
    });
</script>
</body>
</html>